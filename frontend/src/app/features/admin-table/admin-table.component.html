<div class="mt-8 mx-2 employee-case-table px-8 admin-table-container">
  <h1 class="text-center">
    {{ 'admin-panel.title' | translate }}
  </h1>
  <div class="pt-3">
    <p-table
      [value]="users"
      [paginator]="true"
      [rows]="10"
      [globalFilterFields]="['firstName', 'lastName', 'email', 'role']"
      [tableStyle]="{ 'min-width': '50rem' }"
    >
      <ng-template #header>
        <tr>
          <th>
            <div class="text-center">
              {{ 'admin-panel.name' | translate }}
              <p-columnFilter
                type="text"
                field="firstName"
                display="menu"
                [showAddButton]="false"
                [showOperator]="false"
                [showApplyButton]="false"
                [showClearButton]="false"
                [showMatchModes]="false"
              />
            </div>
          </th>

          <th><div class="text-center">Email</div></th>

          <th pSortableColumn="role" style="width: 20%">
            <div class="text-center">
              {{ 'admin-panel.role' | translate }}
              <p-sortIcon field="role">{{ 'admin-panel.role' | translate }}</p-sortIcon>
              <p-columnFilter
                field="role"
                matchMode="equals"
                display="menu"
                [showAddButton]="false"
                [showOperator]="false"
                [showMatchModes]="false"
                [showApplyButton]="false"
                [showClearButton]="false"
              />
            </div>
          </th>
          <th pSortableColumn="caseCount">
            <div class="text-center">
              {{ 'admin-panel.assignedCases' | translate }}
              <p-sortIcon field="caseCount"></p-sortIcon>
            </div>
          </th>
          <th>
            <p-button
              label="{{ 'admin-panel.addNewEmployee' | translate }}"
              (onClick)="openEmployeeDialog()"
            ></p-button>
          </th>
          <th style="width: 5rem"></th>
        </tr>
      </ng-template>
      <ng-template #body let-user>
        <tr>
          <td class="text-center">{{ concatenateName(user) }}</td>
          <td class="text-center">{{ user.email }}</td>
          <td class="text-center">{{ user.role }}</td>
          <td class="text-center">{{ user.caseCount }}</td>
          <td
            ><p-button
              icon="pi pi-trash"
              severity="danger"
              [rounded]="true"
              [outlined]="true"
              (onClick)="deleteUser(user.id)"
            ></p-button
          ></td>
        </tr>
      </ng-template>
    </p-table>

    <app-employee-dialog
      [(visible)]="showEmployeeDialog"
      (onCancel)="closeEmployeeDialog()"
      (onSuccess)="onEmployeeDialogSuccess()"
    ></app-employee-dialog>
  </div>
</div>
