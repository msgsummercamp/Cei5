<div class="eligibility-container">
  <!-- Loading State -->
  @if (shouldShowLoading()) {
    <div class="loading-state">
      <p-card>
        <div class="text-center">
          <p-progressSpinner />
          <h3>{{ 'eligibilityForm.checkEligibility' | translate }}</h3>
          <p>{{ 'eligibilityForm.loading' | translate }}</p>
        </div>
      </p-card>
    </div>
  }

  <!-- Error State -->
  @if (shouldShowError()) {
    <div class="error-state">
      <p-card>
        <div class="text-center">
          <p-message severity="error" [text]="getErrorMessage()" />
          <div class="mt-4">
            <p-button label="Try Again" icon="pi pi-refresh" (click)="onRetryCheck()"> </p-button>
          </div>
        </div>
      </p-card>
    </div>
  }

  <!-- Results -->
  @if (shouldShowResults()) {
    <div class="results-container flex justify-content-center">
      <p-card class="w-full lg:w-6">
        <div class="text-center">
          @if (shouldShowEligible()) {
            <div class="eligible-message">
              <i class="pi pi-check-circle text-6xl text-green-500"></i>
              <h2 class="text-green-500 text-4xl"
                >{{ 'eligibilityForm.eligible.congratulations' | translate }}
              </h2>
              <p-message severity="success" [closable]="false" class="text-xl">
                <div>
                  <span
                    [innerHTML]="'eligibilityForm.eligible.compensation-start' | translate"
                  ></span>
                  <span>{{ compensation }}</span>
                  <span
                    [innerHTML]="'eligibilityForm.eligible.compensation-end' | translate"
                  ></span>
                </div>
              </p-message>
            </div>
          }

          @if (shouldNotShowEligible()) {
            @if (checkWhichEligibilityMotive()) {
              <div class="not-eligible-message">
                <i class="pi pi-times-circle text-6xl text-red-500 mb-3"></i>
                <h2 class="text-red-500">{{ 'eligibilityForm.notEligible.sorry' | translate }}</h2>
                <p-message
                  severity="warn"
                  text="{{ 'eligibilityForm.notEligible.notEligibleMessage' | translate }}"
                  [closable]="false"
                >
                </p-message>
              </div>
            } @else {
              <div class="not-eligible-message">
                <i class="pi pi-times-circle text-6xl text-red-500 mb-3"></i>
                <h2 class="text-red-500">{{
                  'eligibilityForm.conditionsNotFulfilled.sorry' | translate
                }}</h2>
                <p-message
                  severity="warn"
                  text="{{
                    'eligibilityForm.conditionsNotFulfilled.notEligibleMessage' | translate
                  }}"
                  [closable]="false"
                >
                </p-message>
              </div>
            }
          }
        </div>
      </p-card>
    </div>
  }
</div>
