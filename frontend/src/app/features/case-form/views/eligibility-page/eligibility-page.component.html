<div class="eligibility-container">
  <!-- Loading State -->
  @if (shouldShowLoading()) {
    <div class="loading-state">
      <p-card>
        <div class="text-center">
          <p-progressSpinner />
          <h3>{{ 'eligibilityForm.checkEligibility' | translate }}</h3>
          <p>{{ 'eligibilityForm.loading' | translate }}</p>
        </div>
      </p-card>
    </div>
  }

  <!-- Error State -->
  @if (shouldShowError()) {
    <div class="error-state">
      <p-card>
        <div class="text-center">
          <p-message severity="error" [text]="getErrorMessage()" />
          <div class="mt-4">
            <p-button label="Try Again" icon="pi pi-refresh" (click)="onRetryCheck()"> </p-button>
          </div>
        </div>
      </p-card>
    </div>
  }

  <!-- Results -->
  @if (shouldShowResults()) {
    <div class="results-container">
      <p-card>
        <div class="text-center">
          @if (shouldShowEligible()) {
            <div class="eligible-message">
              <i class="pi pi-check-circle text-6xl text-green-500 mb-3"></i>
              <h2 class="text-green-700">{{ 'eligibilityForm.congratulations' | translate }}</h2>
              <p-message
                severity="success"
                text="{{ 'eligibilityForm.eligible' | translate }}"
                [closable]="false"
              >
              </p-message>
            </div>
          }

          @if (shouldNotShowEligible()) {
            @if (checkWihichEligibilityMotive()) {
              <div class="not-eligible-message">
                <i class="pi pi-times-circle text-6xl text-red-500 mb-3"></i>
                <h2 class="text-red-700">{{
                  'eligibilityForm.notEligibleDueToOtherReasons' | translate
                }}</h2>
                <p-message
                  severity="warn"
                  text="{{ 'eligibilityForm.notEligibleDueToOtherReasonsSummary' | translate }}"
                  [closable]="false"
                >
                </p-message>
              </div>
            } @else {
              <div class="not-eligible-message">
                <i class="pi pi-times-circle text-6xl text-red-500 mb-3"></i>
                <h2 class="text-red-700">{{
                  'eligibilityForm.notEligibleDueToDelaysAndCancellations' | translate
                }}</h2>
                <p-message
                  severity="warn"
                  text="{{
                    'eligibilityForm.notEligibleDueToDelaysAndCancellationsSummary' | translate
                  }}"
                  [closable]="false"
                >
                </p-message>
              </div>
            }
          }
        </div>
      </p-card>
    </div>
  }
</div>
